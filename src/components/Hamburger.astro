---
/*
  Hamburger.astro (matches ModeToggle inner button style)
*/
---

<button
  id="menu-toggle"
  class="relative flex items-center justify-center w-10 h-10
        rounded-full bg-white/10 hover:bg-white/20  shadow-inner
        transition-all duration-300 pointer-events-auto active:scale-95"
  
  aria-label="Toggle menu"
  aria-expanded="false"
>
  <!-- Lines -->
  <span
    class="block absolute w-5 h-0.5 bg-white rounded transition-transform duration-300 ease-in-out origin-center"
    id="line-top"
    style="transform: translateY(-6px);"
  ></span>
  <span
    class="block absolute w-5 h-0.5 bg-white rounded transition-opacity duration-200 ease-in-out origin-center"
    id="line-mid"
  ></span>
  <span
    class="block absolute w-5 h-0.5 bg-white rounded transition-transform duration-300 ease-in-out origin-center"
    id="line-bot"
    style="transform: translateY(6px);"
  ></span>
</button>

<script>
  // @ts-nocheck
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("menu-toggle");
    const menu = document.getElementById("sidebar-overlay");
    const overlayBg = document.getElementById("sidebar-backdrop");
    const top = document.getElementById("line-top");
    const mid = document.getElementById("line-mid");
    const bot = document.getElementById("line-bot");

    if (!btn || !menu || !overlayBg) return;

    const toggleMenu = (open) => {
      menu.classList.toggle("translate-x-0", open);
      menu.classList.toggle("translate-x-full", !open);
      overlayBg.classList.toggle("opacity-100", open);
      overlayBg.classList.toggle("pointer-events-auto", open);
      btn.setAttribute("aria-expanded", open);

      if (open) {
        top.style.transform = "rotate(45deg)";
        bot.style.transform = "rotate(-45deg)";
        mid.style.opacity = "0";
      } else {
        top.style.transform = "translateY(-6px) rotate(0)";
        bot.style.transform = "translateY(6px) rotate(0)";
        mid.style.opacity = "1";
      }
    };

    btn.addEventListener("click", () => {
      const open = btn.getAttribute("aria-expanded") === "true";
      toggleMenu(!open);
    });

    overlayBg.addEventListener("click", (e) => {
      if (e.target === overlayBg) toggleMenu(false);
    });

    document.querySelectorAll("#sidebar-overlay a").forEach((link) => {
      link.addEventListener("click", () => toggleMenu(false));
    });
  });
</script>
