---
/*
  Hamburger.astro
*/
---

<button
  id="menu-toggle"
  class="relative flex items-center justify-center w-10 h-10
         rounded-full hover:bg-white/20 drop-shadow hover:scale-110
         transition-all duration-300 pointer-events-auto active:scale-95"
>
  <span
    id="line-top"
    class="block absolute w-5 h-0.5 bg-neutral-900 dark:bg-white rounded
           transition-transform duration-300 ease-in-out origin-center"
    style="transform: translateY(-6px);"
  ></span>

  <span
    id="line-mid"
    class="block absolute w-5 h-0.5 bg-neutral-900 dark:bg-white rounded
           transition-opacity duration-200 ease-in-out origin-center"
  ></span>

  <span
    id="line-bot"
    class="block absolute w-5 h-0.5 bg-neutral-900 dark:bg-white rounded
           transition-transform duration-300 ease-in-out origin-center"
    style="transform: translateY(6px);"
  ></span>
</button>

<script>
  // @ts-nocheck
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("menu-toggle");
    const top = document.getElementById("line-top");
    const mid = document.getElementById("line-mid");
    const bot = document.getElementById("line-bot");

    if (!btn) return;

    let isOpen = false;

    function animateOpen() {
      top.style.transform = "translateY(0px) rotate(45deg)";
      bot.style.transform = "translateY(0px) rotate(-45deg)";
      mid.style.opacity = "0";
      isOpen = true;
    }

    function animateClose() {
      top.style.transform = "translateY(-6px) rotate(0deg)";
      bot.style.transform = "translateY(6px) rotate(0deg)";
      mid.style.opacity = "1";
      isOpen = false;
    }

    // Button click â†’ open or close
    btn.addEventListener("click", () => {
      if (isOpen) window.closeSidebar(); // sidebar will call animateClose()
      else window.openSidebar();         // sidebar will call animateOpen()
    });

    // Expose animation functions globally
    window.hamburgerOpen = animateOpen;
    window.hamburgerClose = animateClose;
  });
</script>
